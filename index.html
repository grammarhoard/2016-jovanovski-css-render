<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Focusr by jovanovski</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Focusr</h1>
      <h2 class="project-tagline">A critical path CSS generator and inliner</h2>
      <a href="https://github.com/jovanovski/criticalcss" class="btn">View on GitHub</a>
      <a href="https://github.com/jovanovski/criticalcss/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/jovanovski/criticalcss/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="css-focusr" class="anchor" href="#css-focusr" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>CSS Focusr</h1>

<p>A critical path CSS extraction and injection tool using Node.js.</p>

<h2>
<a id="what-is-css-focusr" class="anchor" href="#what-is-css-focusr" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What is CSS Focusr</h2>

<p>CSS Focusr looks for critical "above the fold" CSS rules. By giving it a viewport size, it renders your page and checks to see what 
elements are primarily visible in that viewport. It then extracts all CSS rules that apply to these "critical" elements, and embeds
them in a <code>&lt;style&gt;</code> tag in the <code>&lt;head&gt;</code> tag, loading the rest of the CSS from the bottom of the <code>&lt;body&gt;</code> tag with Javascript.</p>

<p>This allows the browser to start rendering the page much faster, because CSS is a render-blocking resource, meaning, while the browser
is downloading all the CSS files defined in the head of the page, it will display a blank page, and only start rendering once it has them all
downloaded.</p>

<p>CSS Focusr helps solve this by inlining critical CSS in the head of the page (saving GET requests), and moving the rest
to the bottom of the body, where they have no more elements to block, and can be applied without stopping the render process.</p>

<h3>
<a id="a-more-technical-description" class="anchor" href="#a-more-technical-description" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>A more technical description</h3>

<p>CSS Focusr looks for <code>&lt;link rel='stylesheet'&gt;</code> tags, extracts the CSS from the linked files,
looks for critical CSS by rendering the input HTML file/URL, and checking if any element defined by the selectors in the parsed CSS
are positioned within the defined viewport. All critical CSS is then inlined as a <code>&lt;style&gt;</code> tag in the <code>&lt;head&gt;</code> tag, and the rest
is added into a Javascript function at the end of the <code>&lt;body&gt;</code> tag that uses the browser animation queue to load them in asynchronously.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage</h2>

<p>Each HTML file/URL that needs to be processed should be defined in its own group. Do this via <code>config.json</code> file, where you also override the default options of the tool.</p>

<h3>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h3>

<p>This is the full default configuration file, with all possible settings that can be overridden.</p>

<pre><code>{
    "allowJS": false,
    "debug": false,
    "processExternalCss": true,
    "renderTimeout": 60000,
    "groups": [
        {
        "enabled": true,
        "baseDir": "tests/",
        "inputFile": "",
        "outputFile": "",
        "alwaysInclude": [],
        "httpAuth": "",
        "wordpress": false,
        "viewport": [1200, 900],
        "outputJS": false
        }
    ]
}
</code></pre>

<p>An example configuration could look something like this</p>

<pre><code>{
    "debug": true,
    "renderTimeout": 120000,
    "groups": [
        {
        "enabled": true,
        "baseDir": "tests/test1/",
        "inputFile": "pre.html",
        "outputFile": "index.html",
        "alwaysInclude": [
            '.div-important', '#main-title a'
        ],
        "viewport": [1280, 768]
        }
    ]
}
</code></pre>

<h3>
<a id="global-settings" class="anchor" href="#global-settings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Global settings</h3>

<h4>
<a id="allowjs-boolean" class="anchor" href="#allowjs-boolean" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>allowJs (boolean)</h4>

<p>If set to true, will keep all <code>&lt;script&gt;</code> tags while processing the site with PhantomJS. WARNING: Allowing JS will slow the extraction process drastically.</p>

<h4>
<a id="debug-boolean" class="anchor" href="#debug-boolean" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>debug (boolean)</h4>

<p>If set to true, will add a red border to indicate the viewport area that is being examined on the resulting HTML file. Only works on local input files.</p>

<h4>
<a id="processexternalcss-boolean" class="anchor" href="#processexternalcss-boolean" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>processExternalCss (boolean)</h4>

<p>If set to false, will disable processing of externally linked CSS files.</p>

<h4>
<a id="rendertimeout-int" class="anchor" href="#rendertimeout-int" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>renderTimeout (int)</h4>

<p>Sets the time allowed for PhantomJS to render the site and find the critical CSS styles.</p>

<h3>
<a id="group-settings" class="anchor" href="#group-settings" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Group settings</h3>

<h4>
<a id="enabled-boolean" class="anchor" href="#enabled-boolean" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>enabled (boolean)</h4>

<p>Toggles if the group should be processed by Focusr.</p>

<h4>
<a id="basedir-string" class="anchor" href="#basedir-string" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>baseDir (string)</h4>

<p>The base directory to which the output (and possibly input) files are relative to.</p>

<h4>
<a id="inputfile-string" class="anchor" href="#inputfile-string" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>inputFile (string)</h4>

<p>A URL or path to a HTML file that should be processed, relative to the baseDir setting.</p>

<h4>
<a id="outputfile-string" class="anchor" href="#outputfile-string" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>outputFile (string)</h4>

<p>The path to the output file relative to the baseDir setting. If the inputFile is a URL, this will be the output for the critical CSS file. If the input file is an local HTML file, this will output the same HTML file with inlined critical CSS and JS.</p>

<h4>
<a id="alwaysinclude-arraystring" class="anchor" href="#alwaysinclude-arraystring" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>alwaysInclude (array(string))</h4>

<p>An array of selectors that should always be included as critical, regardless if they are in the initial viewport or not.</p>

<h4>
<a id="httpauth-string" class="anchor" href="#httpauth-string" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>httpAuth (string)</h4>

<p>A string of basic HTTP authentication, if needed for input files that are URLs. Format 'user:password'.</p>

<h4>
<a id="wordpress-boolean" class="anchor" href="#wordpress-boolean" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>wordpress (boolean)</h4>

<p>A boolean that states if the inputFile is a link to a Wordpress site that has the Focusr plugin installed.</p>

<h4>
<a id="viewportint-int" class="anchor" href="#viewportint-int" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>viewport([int, int])</h4>

<p>An array of 2 integers that state the width and height of the viewport.</p>

<h4>
<a id="outputjs-string" class="anchor" href="#outputjs-string" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>outputJS (string)</h4>

<p>If a path relative to the baseDir is entered here, the loadCSS Javascript will be saved to it.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/jovanovski/criticalcss">Focusr</a> is maintained by <a href="https://github.com/jovanovski">jovanovski</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
